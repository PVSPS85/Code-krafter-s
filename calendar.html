{% extends "base.html" %}
{% block title %}Calendar{% endblock %}

{% block content %}
<!-- FullCalendar CDN must load BEFORE we use it -->
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>

<div style="padding:38px 5vw 56px;max-width:900px;margin:auto;">
  <h2 style="display:flex;align-items:center;gap:18px;font-size:2.1rem;font-weight:800;margin-bottom:8px;">
    <i class="fas fa-calendar-alt" style="color:#32C48D;font-size:2.3rem;"></i>
    My Calendar
  </h2>
  <p style="margin-bottom:20px;color:#666;font-size:1.05rem;">Click a date to add events or click events to remove them.</p>
  <div id='calendar'></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      height: 600,
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay'
      },
      nowIndicator: true,
      selectable: true,
      editable: true,
      dayMaxEvents: 3,
      events: [
        {% for e in events %}
        {
          title: '{{ e.title }}',
          start: '{{ e.date }}'
        }{% if not loop.last %},{% endif %}
        {% endfor %}
      ],
      dateClick: function(info) {
        var title = prompt('Add event for ' + info.dateStr + ':');
        if (title) {
          calendar.addEvent({
            title: title,
            start: info.dateStr,
            allDay: true,
            backgroundColor: '#4dd0e1',
            borderColor: '#32C48D'
          });
        }
      },
      eventClick: function(info) {
        if (confirm('Remove "' + info.event.title + '"?')) {
          info.event.remove();
        }
      }
    });
    calendar.render();
  });
</script>

<style>
/* Beautiful Custom Styling */
#calendar {
  box-shadow: 0 6px 30px rgba(50, 196, 141, 0.15);
  border-radius: 14px;
  padding: 18px;
  background: var(--bg-white);
}
.fc-toolbar-title {
  font-size: 1.5rem !important;
  font-weight: 700 !important;
  color: #32C48D !important;
  letter-spacing: 0.3px;
}
.fc-button-primary {
  background: #4dd0e1 !important;
  border: none !important;
  font-weight: 600 !important;
  border-radius: 8px !important;
  transition: all 0.2s;
}
.fc-button-primary:hover {
  background: #32C48D !important;
  transform: translateY(-1px);
}
.fc-button-primary:not(:disabled):active,
.fc-button-primary:not(:disabled).fc-button-active {
  background: #21808D !important;
}
.fc-daygrid-event {
  border-radius: 6px !important;
  padding: 3px 6px !important;
  font-weight: 500 !important;
}
.fc-day-today {
  background: rgba(50, 196, 141, 0.08) !important;
}
.fc-event {
  cursor: pointer;
}
</style>
{% endblock %}
